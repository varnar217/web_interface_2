/*
The Neon Javascript Library
Copyright (c) Thomas Rutter 2013
http://neonjs.com
http://neonjs.com/license
*/
neon=function(){var f,k,a={},b={},c={},d=[],e=[],g=0,h=0,i=function(a){for(a=a.previousSibling;a;a=a.previousSibling)if(1===a.nodeType)return a},j={" ":function(a,b){var c;for(c=a.length;c--;)if(a[c].compareDocumentPosition?16&a[c].compareDocumentPosition(b):a[c].contains(b)&&a[c]!==b)return 1},">":function(a,b){var c;for(c=a.length;c--;)if(a[c]===b.parentNode)return 1},"+":function(a,b){var c;for(c=a.length;c--;)if(a[c]===i(b))return 1},"&":function(a,b){var c;for(c=a.length;c--;)if(a[c]===b)return 1}};k=function(){var b;for(b=e.shift();b;b=e.shift())b();a.select(document).unwatch("DOMContentLoaded",k),a.select(window).unwatch("load",k),g=1};var l;l=function(){try{document.documentElement.doScroll("left"),k()}catch(a){g||setTimeout(l,16)}};var o,m=function(a,b,c,d){var e="class"===b?a.className:a.getAttribute(b);return"="===c?e===d:"~="===c?(" "+e+" ").indexOf(" "+d+" ")>=0:0===(e+"-").indexOf(d)},n=function(a){var b,c,d,e,h,k,l,n,f=[],g=[],o=/(([>+]?)\s*)([#.\[:]?)([*\w\-]+)(([|~]?=)("|'|)((\\.|[^\\])*?)\7\])?|,/g;for(a+=",",d=o.exec(a);d;d=o.exec(a))if(d[4]){var p=d[3],q=d[4],r=d[6],s=(d[8]||"").replace(/\\(.)/g,"$1"),t=!h,u=0,v=[];if(h=d[2]||(d[1]&&h?" ":h),k=1===f.length&&(">"===h||" "===h),l=k?f[0]:document,f.length||t){if("&"===h)t=1,v=f.slice(0);else if("#"===p)u=1,e=document.getElementById(q),e&&v.push(e);else{for("."===p&&l.getElementsByClassName?(u=1,e=l.getElementsByClassName(q)):(u=!p,e=l.getElementsByTagName(p?"*":q)),b=0,c=e.length;c>b;)v.push(e[b++]);k&&" "===h&&(t=1)}for(b=v.length;b--;)n=u?1:p?"#"===p?v[b].id===q:"."===p?(" "+v[b].className+" ").replace(/\s/g," ").indexOf(" "+q+" ")>=0:"["===p?r&&s?m(v[b],q,r,s):v[b].hasAttribute(q):"first-child"===q.toLowerCase()?!i(v[b]):0:"*"===q||v[b].nodeName.toLowerCase()===q.toLowerCase(),n&&(t||j[h](f,v[b]))||v.splice(b,1);f=v,h="&"}}else{for(e=f.shift();e;e=f.shift())j["&"](g,e)||g.push(e);h=0}return g};o=function(){var c,e,b=d.length,g=+new Date,h=[];for(f=b?f+10>g?f+50/3:g+4:0,f&&setTimeout(o,f-g);b--;)c=d[b],e=(g-c[4])/(c[7]||400),e>=1&&d.splice(b,e=1),c[0].style[c[1]]=c[6]+(("lin"===c[8]?e:"in"===c[8]?e*e:"inout"===c[8]?(1-Math.cos(Math.PI*e))/2:"el"===c[8]?((2-e)*e-1)*Math.cos(3.5*Math.PI*e)+1:"function"==typeof c[8]?c[8](e):(2-e)*e)*c[3]+c[2])+c[5],1===e&&c[9]&&(h.push(c[0]),b&&d[b-1][10]===c[10]||(c[9].call(a.select(h)),h=[]))};var p=function(a,b){return function(){var d,c=event;return c.preventDefault=function(){c.returnValue=!1},c.stopPropagation=function(){c.cancelBubble=!0},c.which=1&c.button?1:2&c.button?3:4&c.button?2:c.keyCode||c.charCode,c.pageX=c.clientX+(document.documentElement.scrollLeft||document.body&&document.body.scrollLeft),c.pageY=c.clientY+(document.documentElement.scrollTop||document.body&&document.body.scrollTop),c.currentTarget=b,c.target=c.srcElement,c.relatedTarget=c.fromElement!==c.target?c.fromElement:c.toElement,d=a.call(b,c),c=null,d}},q=function(b){return function(c){c.currentTarget===c.relatedTarget||a.select(c.currentTarget).contains(c.relatedTarget)||b.call(this,c)}};return a.select=function(a){var b,c,d,e=function(){};if(e.prototype=this,d=new e,"string"!=typeof a){for(c=a?a.nodeType||a.setTimeout?[a]:a:[],b=d.length;--b>=c.length;)delete d[b];for(d.length=b=c.length;b--;)d[b]=c[b];return d}return this.select(document.querySelectorAll?document.querySelectorAll(a):n(a))},a.contains=function(b){var c,d,f,e=!!document.compareDocumentPosition,g=a.select(b);for(d=g.length;d--;){try{for(f=0,c=this.length;!f&&c--;)f=e?16&this[c].compareDocumentPosition(g[d]):this[c].contains(g[d])&&this[c]!==g[d]}catch(h){}if(!f)return!1}return!0},a.watch=function(a,b){var d,g,e="mouseenter"===a?"mouseover":"mouseleave"===a?"mouseout":null,f="focusin"===a?"focus":"focusout"===a?"blur":null;for(b.$neoni=b.$neoni||++h,d=this.length;d--;)g=b,this[d].addEventListener?this[d].addEventListener(e||f||a,e?g=q(g):g,!!f):this[d].attachEvent("on"+a,g=p(g,this[d])),this[d].$neoni=this[d].$neoni||++h,c[this[d].$neoni+a+b.$neoni]=g},a.unwatch=function(a,b){var d,e="mouseenter"===a?"mouseover":"mouseleave"===a?"mouseout":null,f="focusin"===a?"focus":"focusout"===a?"blur":null;for(d=this.length;d--;)this[d].$neoni&&b.$neoni&&c[this[d].$neoni+a+b.$neoni]&&(this[d].addEventListener?this[d].removeEventListener(e||f||a,c[this[d].$neoni+a+b.$neoni],!!f):this[d].detachEvent("on"+a,c[this[d].$neoni+a+b.$neoni]),delete c[this[d].$neoni+a+b.$neoni]);return this},a.ready=function(a){g?a():e.push(a)},a.loaddir="",a.load=function(a,c){var d,e="string"==typeof a?[a]:a,f=e.length,g=this,h=function(a){var d=/^[^\/?#]+:|^\//.test(a)?a:g.loaddir+a,e=b[a]||(b[a]=g.select("head").append({script:"",$src:d})),h=0,i=function(){h||this.readyState&&!/loade|co/.test(this.readyState)||(b[a]=h=!0,e.unwatch("load",i).unwatch("readystatechange",i),c&&!--f&&c())};e.watch("load",i),e.watch("readystatechange",i)};for(d=e.length;d--;)b[e[d]]!==!0?h(e[d]):f--;c&&!f&&c()},a.getStyle=function(a){var b=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(this[0],null):this[0].currentStyle,c=this.length?b["float"===a?"cssFloat":a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})]:void 0;return void 0!==c?c:"opacity"===a?(c=/opacity=(\d+)/.exec(this.getStyle("filter")),c?(parseFloat(c[1])/100).toString():void 0):"cssFloat"===a?this.getStyle("styleFloat"):void 0},a.getPosition=function(a){var d,b=this.select(a),c=this.length?this[0]===window?{left:0,top:0,right:window.innerWidth||document.documentElement.clientWidth,bottom:window.innerHeight||document.documentElement.clientHeight}:this[0].getBoundingClientRect():void 0;return b.length&&c&&b[0]!==window?(c={left:c.left,right:c.right,top:c.top,bottom:c.bottom},c.left+=document.documentElement.scrollLeft||document.body.scrollLeft,c.right+=document.documentElement.scrollLeft||document.body.scrollLeft,c.top+=document.documentElement.scrollTop||document.body.scrollTop,c.bottom+=document.documentElement.scrollTop||document.body.scrollTop,b[0]!==document.documentElement&&(d=b.getPosition(document.documentElement),c.left-=d.left,c.right-=d.right,c.top-=d.top,c.bottom-=d.bottom),c):c},a.setAttribute=function(a,b){for(var c=this.length,d=a.toLowerCase();c--;)"style"===d?(this[c].setAttribute(a,b),this[c].style.cssText=b):"class"===d?this[c].className=b:"tabindex"===d?(this[c].tabIndex=b,b||this[c].removeAttribute("tabIndex")):"for"===d&&void 0!==this[c].htmlFor?this[c].htmlFor=b:b&&this[c].setAttribute(a,b),b||this[c].removeAttribute(a);return this},a.removeAttribute=function(a){return this.setAttribute(a,"")},a.removeClass=function(a){for(var b=this.length;b--;)this[b].className=(" "+this[b].className+" ").replace(/\s/g," ").replace(" "+a+" "," ").slice(1,-1);return this},a.addClass=function(a){for(var b=this.length;b--;)this[b].className=(" "+this[b].className+" ").replace(/\s/g," ").replace(" "+a+" "," ").slice(1)+a;return this},a.styleRule=function(a,b){var c=this.select("#neon-styleRule-s");return c.length||(c=this.select("head").append({style:""}).setAttribute("id","neon-styleRule-s")),c[0].styleSheet?c[0].styleSheet.cssText+=a+"{"+b+"}":c.append(a+"{"+b+"}"),this},a.style=function(a,b,c,e,g,i){var k,j=this.length,l=+new Date,m=/([^\d\.\-]*)([\d\.\-]*)([\d\D]*)/.exec(b),n=/([^\d\.\-]*)([\d\.\-]*)([\d\D]*)/.exec(c),p=parseFloat(m[2]),q=parseFloat(n[2]),r=!isNaN(p)&&!isNaN(q),s=m[1],t=m[3],u=this,v=i&&++h,w=i&&function(){i.call(u)};for(a="float"===a?"cssFloat":a.replace(/-(.)/g,function(a,b){return b.toUpperCase()});j--;){for(this[j].style[a]=b,k=d.length;k--;)d[k][0]===this[j]&&d[k][1]===a&&d.splice(k,1);r&&d.push([this[j],a,p,q-p,l,t,s,e,g,w,v])}return"cssFloat"===a&&this.style("styleFloat",b),"opacity"===a&&this.style("filter","alpha(opacity="+100*p+")",r&&100*q,e,g,i),r&&!f&&o(),this},a.build=function(a){var b,c,d,e=[];if(""===a||null===a||0===a.length)return this.select([]);if(a.cloneNode&&a.nodeType)return this.select(a);if(a.length&&a[0]&&"string"!=typeof a){for(d=document.createDocumentFragment(),b=0,c=a.length;c>b;)d.appendChild(this.build(a[b++])[0]);return this.select(d.childNodes)}if("object"!=typeof a)return this.select(document.createTextNode(a));for(b in a)a.hasOwnProperty(b)&&("$"===b.slice(0,1)?e.push([b.slice(1),a[b]]):(d=this.select(document.createElement(b)),a[b]&&d.append(a[b])));for(b=e.length;b--;)d.setAttribute(e[b][0],e[b][1]);return this.select(d)},a.append=function(a){var b,c,d,g,h,e=this.build(a),f=e.length&&e[0],i=[];if(f)for(f.parentNode&&11===f.parentNode.nodeType&&(f=f.parentNode),b=this.length;b--;)if(this[b].appendChild){for(g=b?f.cloneNode(!0):f,h=11===g.nodeType?g.childNodes:[g],c=0,d=h.length;d>c;)i.push(h[c++]);this[b].appendChild(g)}return this.select(i)},a.insert=function(a){var b,c,d,g,h,e=this.build(a),f=e.length&&e[0],i=[];if(f)for(f.parentNode&&11===f.parentNode.nodeType&&(f=f.parentNode),b=this.length;b--;)if(this[b].parentNode){for(g=b?f.cloneNode(!0):f,h=11===g.nodeType?g.childNodes:[g],c=0,d=h.length;d>c;)i.push(h[c++]);this[b].parentNode.insertBefore(g,this[b])}return this.select(i)},a.remove=function(){for(var a=this.length;a--;)this[a].parentNode&&this[a].parentNode.removeChild(this[a]);return this},a.empty=function(){for(var b,a=this.length;a--;)for(b=this[a].lastChild;b;b=this[a].lastChild)this[a].removeChild(b);return this},a.jsonDecode=function(a){return/^[\],:{}\s]+$/.test(a.replace(/\\["\\\/bfnrt]|\\u[0-9a-fA-F]{4}/g,"$").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?this.$ev("("+a+")"):void 0},a.getHttp=function(a,b,c,d,e){var f,g=[],h=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(h.onreadystatechange=function(){4===h.readyState&&b.call(h)},h.open(c||"GET",a,!0),d&&"string"!=typeof d){for(f in d)d.hasOwnProperty(f)&&g.push(encodeURIComponent(f)+"="+encodeURIComponent(d[f]));d=g.join("&"),e="application/x-www-form-urlencoded"}e&&h.setRequestHeader("Content-type",e),h.send(d)},a.select(document).watch("DOMContentLoaded",k),a.select(window).watch("load",k),/\bMSIE\s/.test(navigator.userAgent)&&!window.opera&&self===top&&l(),a}(),neon.$ev=function(a){return eval(a)};
